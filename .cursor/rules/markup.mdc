---
alwaysApply: true
---

## 마크업 가이드

### 1. 기본 원칙 (Global Rules)

[필수]

1. @azit/design-system 매핑을 항상 1순위로 시도한다.
2. Figma 디자인과 시각적으로 100% 일치해야 한다.
3. Figma에 존재하지 않는 디자인, 수치, 구조는 절대 생성하지 않는다.
4. 코드 생성 작업은 반드시 8. 권장 작업 워크플로우 순서를 따른다.
5. 작업 완료 후 9. 리뷰 체크리스트를 전부 검증한다.

[금지]
• 디자인, 기능, 여백, 인터랙션 임의 추측
• Figma Node에 없는 요소 생성

---

### 2. 컴포넌트 구현 규칙 (Component Rules)

2-1. 컴포넌트 매핑 우선순위

다음 순서를 반드시 따른다:

1. @azit/design-system 컴포넌트
2. @azit/design-system 컴포넌트 + props 조합
3. @web/src/shared/ui 컴포넌트
4. @web/src/widgets 레이어에 존재하는 도메인 위젯 컴포넌트
5. Vanilla Extract + @azit/design-system 디자인 토큰

※ 위 순서를 건너뛰는 구현은 허용되지 않는다.

---

2-2. 컴포넌트 구현 규칙

[필수]
• Figma Node의 계층 구조(Frame / Group / Auto Layout)를 React 컴포넌트 구조에 그대로 반영한다.
• 스타일, 레이아웃, depth는 코드에서 명확히 드러나야 한다.
• 변수명과 컴포넌트명은 역할이 명확해야 한다.
• 동일 UI 패턴은 2-3. 반복 UI 컴포넌트 분리 규칙을 참고하여 중복 없이 추상화한다.

- 스타일은 vanilla extract를 사용한다.
- 인라인 스타일은 사용하지 않는다.
- 공통 props, 스타일(some.css.ts), 유틸리티 함수는 별도 파일로 분리한다.

---

2-3. 반복 UI 컴포넌트 분리 규칙

Item 컴포넌트
• 반복 렌더링되는 단위 UI는 반드시 분리한다.
• 네이밍 규칙:
도메인명 + 화면 레이아웃 타입 + Item
예) StoreGridItem, ScheduleListItem

List / Grid 컴포넌트
• Item을 반복 렌더링하는 상위 컴포넌트도 반드시 분리한다.
• 네이밍 규칙:
도메인명 + 화면 레이아웃 타입
예) StoreGrid, ScheduleList

---

### 3. 아이콘 구현 규칙 (Icon Rules)

[필수]

1. @azit/design-system/src/components/icon에 존재하는 아이콘만 직접 사용한다.
2. 존재하지 않는 아이콘은 figma-icon-workflow.md 절차를 반드시 따른다.
3. 아이콘의 크기, 위치, 비율, 패딩은 Figma와 정확히 일치해야 한다.

---

### 4. Typography 규칙

• 모든 텍스트는 @azit/design-system `typography` 스타일 객체, 컴포넌트 또는 규칙을 사용한다.
• 커스텀 font-size, line-height, font-weight 직접 정의 금지.

---

### 5. 레이아웃

- Figma 프레임의 width가 375px인 경우 페이지로 인식한다.
- **iPhone `Home Indicator`와 `Status bar` 컴포넌트는 페이지 레이아웃에 포함하지 않는다.(필수)**
- 하나의 페이지에는 하나의 AppLayout만 존재한다.
- AppScreen - AppLayout 컴포넌트 계층 구조를 준수한다.
  - 페이지에 `Header` 컴포넌트가 존재하면 단일 `<AppLayout>`+ `<Header />` + PageContent 구조를 따른다.
  - **페이지 레이아웃 코드 (필수)**를 참고한다.
  - 페이지 레이아웃 코드

  ```tsx
  export function SamplePage() {
    return (
      <AppScreen>
        <AppLayout>
          <Header sticky />
          // Children: PageContent
        </AppLayout>
      </AppScreen>
    );
  }
  ```

---

5-1. Grid 사용 규칙

**Grid 구조가 명확한 UI는 반드시 CSS Grid로 구현한다.**  
행과 열이 동시에 존재하는 레이아웃(카드 리스트, 대시보드, 테이블, 갤러리, 2열 이상 반복 UI 등)은 **Flexbox로 구현하지 않는다.**

Flexbox는 아래 경우에만 허용된다:

- 단일 방향 흐름 (row 또는 column)
- 버튼 그룹, 탭, 입력 폼, 툴바 등 **1차원 정렬 UI**

---

5-2. Flexbox 사용 금지 조건

다음 중 하나라도 해당되면 **Flexbox 사용을 금지한다**:

- 카드 또는 아이템이 2열 이상 반복됨
- 동일한 크기의 UI가 행과 열로 반복됨
- 반응형에서 줄바꿈이 발생해야 하는 구조
- 정렬 기준이 row와 column을 동시에 가짐

이러한 구조를 `flex-wrap`으로 구현하는 것은 **레이아웃 오류로 간주한다.**

---

5-3. Position 규칙

**`position: absolute` 사용을 원칙적으로 금지한다.**

다음과 같이 디자인상 absolute layer로 명확히 정의된 경우만 허용한다:

- Tooltip
- Floating badge
- Overlay
- Floating button
- Figma에서 absolute positioning이 지정된 레이어

그 외 모든 정렬, 간격, 가운데 정렬, 고정 배치는  
**Grid 또는 Flexbox로만 구현한다.**

---

5-4. 레이아웃 선택 우선순위

Figma MCP는 레이아웃 구현 시 다음 우선순위를 따른다:

1. **CSS Grid**  
   → 2차원 레이아웃, 카드, 섹션, 리스트, 대시보드
2. **Flexbox**  
   → 버튼 그룹, row, stack, form, header
3. **Position: absolute**  
   → 오버레이, 떠 있는 요소만

---

5-5. 목적

이 규칙의 목적은 다음과 같다:

- 반응형 레이아웃 안정성 확보
- Tailwind CSS 및 Vanilla Extract 디자인 토큰과의 일관성 유지
- Figma Auto-layout과 코드 레이아웃 구조의 1:1 매칭

---

### 6. 페이지 콘텐츠 구현

- 페이지 내부 콘텐츠는 디자인 토큰을 사용해 반응형에 대응한다.
- 콘텐츠는 max-width, min-width 등은 사용하지 않는다.
- 컨텐츠 영역은 컨테이너/섹션 영역을 컴포넌트로 세분화한다.
  - 컴포넌트는 반응형 디자인을 준수한다. (고정 width 금지)
  - 분리한 컴포넌트는 `project-architecture.mdc`의 FSD 규칙을 준수해 디렉토리/파일에 분리한다.
- 반복 UI는 반드시 Array.map을 사용한다.
- 단일 UI라도 반복 가능성이 있으면 Item 컴포넌트로 분리한다.
- 반복되는 데이터는 Figma node의 데이터를 전부 반영한 Mock 데이터로 처리한다.
  - Mock 데이터는 src/shared/mock 디렉토리에 도메인별로 분리한다.

---

### 7. 스타일 파일(css.ts) 작성 규칙 (Style File Rules)

[필수]

1. css.ts 파일명은 스타일이 적용되는 대상 컴포넌트/페이지 파일명과 완벽하게 일치해야 한다.
2. 파일명 규칙: <대상 파일명>.css.ts
3. css.ts 파일은 동일 세그먼트의 styles 디렉토리에 위치시킨다.
4. 하나의 컴포넌트/페이지는 하나의 대응되는 css.ts 파일을 가진다.
5. 스타일 정의 시 Vanilla Extract + @azit/design-system 디자인 토큰만 사용한다.

예시 디렉토리 구조

ui/StorePage.tsx
styles/StorePage.css.ts

※ 파일명 불일치, 위치 변경, 공용 스타일 파일로의 병합은 허용되지 않는다.

---

### 8. 권장 작업 워크플로우

1.  @azit/design-system 디자인 토큰 확인
2.  매핑 가능한 컴포넌트 및 아이콘 식별
3.  Figma 수치 기준으로 크기, 여백, 정렬 구현
4.  반복 UI 분리
5.  Mock 데이터 분리
6.  스타일 파일(css.ts) 생성 및 매핑 확인
7.  `project-architecture.mdc`의 FSD 규칙을 준수해 디렉토리/파일을 배치한다.
8.  Chrome DevTools MCP로 스크린샷을 캡처해 적용된 스타일이 정확히 일치하는지 검증한다.

---

### 9. 리뷰 체크리스트 (Final Validation)

• @azit/design-system 컴포넌트 우선 사용 여부
• 커스텀 스타일에 디자인 토큰만 사용했는가
• css.ts 파일명과 대상 파일명이 정확히 일치하는가
• AppScreen - AppLayout 컴포넌트 계층 구조를 준수했는지 확인한다.
• `project-architecture.mdc`의 FSD 규칙을 준수해 디렉토리/파일을 배치했는지 확인한다.
• 스타일 파일이 동일 세그먼트의 styles 디렉토리에 위치하는가
• Figma와 시각적으로 1:1 일치하는가 (Figma MCP로 검증)
